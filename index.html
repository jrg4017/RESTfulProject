<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
  	<title>ISTE340 P2</title>
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>

<!-- link to css main -->
<link href="assets/css/main.css" rel="stylesheet">

 <!-- JQUERY PLUGIN 1: show / hide search box -->
<script src="assets/js/showHide.js"></script>

<!-- JQUERY PLUGIN 2: POP UP WITH TABS -->
<script src="http://code.jboxcdn.com/0.3.2/jBox.min.js"></script>
<link href="http://code.jboxcdn.com/0.3.2/jBox.css" rel="stylesheet">

<!--JQUERY PLUGIN 3: TABS WITH DATA-->
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

<!--JQUERY PLUGIN 4: PAGINATION WITH CONTROL OVER RESULTS-->
<script src="//cdn.datatables.net/1.10.6/js/jquery.dataTables.min.js"></script>
<link href="assets/css/datatable.css" rel="stylesheet">

<!--JQUERY PLUGIN 5: GOOGLE MAPS-->
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAxaRnS-0a3lXGcPXW_XPd43ROMGBN8jaI&sensor=false"></script>


<!--PURE CSS styles -->
<link rel="stylesheet" href="assets/css/pure.css">

<script type="text/javascript">

///////////////////////////////////////
//Build the search functionality. <-- REQUIRED TO BE IN INDEX BY ASSIGNMENT
//onload, get the cities for the state, show/hide div
	$(document).ready(function(){
		getCities('NY');
		getOrgTypes();
                
                //show / hide divs during search
                 $('.show_hide').showHide({			 
                        speed: 1000,  // speed you want the toggle to happen	
                        easing: '',  // the animation effect you want. Remove this line if you dont want an effect and if you haven't included jQuery UI
                        changeText: 1, // if you dont want the button text to change, set this to 0
                        showText: 'View Search',// the button text to show when a div is closed
                        hideText: 'Close Search' // the button text to show when a div is open

                });
	});

//For now, this will be a select to get the 'tabs' needed for the orgId.   
// For the project you will do this with tabs from the jQuery UI.
function getData(id){
//we need to figure out how many 'tabs' or areas of information this type of org has
		$.ajax({
			type:'get',
			async:true,
			url:'proxy.php',
			data:{path:'/Application/Tabs?orgId='+id},
			dataType:'xml',
			success:function(data){
				if($(data).find('error').length!=0){
					//output that server is down/sucks
				}else{
					
                    //create a pop up box that contains the tabs
                    var myModal = new jBox('Modal',{
                        content: $("#tabs"),
                        position:{
                            x: 'center',
                            y: 'top'
                        },
                        offset:{ //set the offset from the edge
                            y: 50
                        },
                        outside: 'x' //outside of target

                    });

                    myModal.open(); //open the pop up
                    
					//information for the tabs
                    getGeneral(id);
                    getLocations(id);
                    getTraining(id);
                    getTreatment(id);
                    getFacilities(id);
                    getEquipment(id);
                    getPhysicians(id);
                    getPeople(id);
				}//close if else
			}//close success
		});//close .ajax func
	}//close getData

	// This will be called by the changing of the select to get the general information for orgId
	function getGeneral(id){
		$.ajax({
			type:'get',
			url:'proxy.php',
			data:{path:'/'+id+'/General'},
			dataType:'xml',
			success:function(data){
				if($(data).find('error').length!=0){
				//do something....
				}else{
					//print out the table
					var x='<table>';
					x+= generalInfo(data);
					x+= '</table>';

					$('#output').html(x);
				}
			}
		});
	}

	function generalInfo(data){
		var name = ifNull($(data).find('name').text());
		var descr = ifNull($(data).find('description').text());
		var email = ifNull($(data).find('email').text());
		var web = ifNull($(data).find('website').text());
		var numMem = ifNull($(data).find('nummembers').text());
		var numcalls = ifNull($(data).find('numcalls').text());

		var x = getRow("Name", name);
		x+= getRow("Description", descr);
		x+= getRow("Email", email);
		x+= getRow("Website", web);
		x+= getRow("Number of members", numMem);
		x+= getRow("Number of calls", numcalls);
		return x;
	}
	
	
	
	/**
	  * gets the necessary information for location
	  * @param id
	  */
	function getLocations(id){
        $.ajax({
			type:'get',
			url:'proxy.php',
			data:{path:'/'+id+'/Locations'},
			dataType:'xml',
			success:function(data){
				if($(data).find('error').length!=0){
					$('#fragment-2').html("No data to show.");
				}else{
					//load the data into arrays in order to print out info
                    var type = getArray(data, 'type');

                    var x = "<select id='loc-type' name='loc-type'>";

                    for(var i = 0; i < type.length; i++){
                        x+= "<option value='"+ i + "'>" + type[i] + "</option>";
                    }

                    x+= "</select><br>"; //end of select

                    //default of sel is 0
                    var sel = 0;

                    //set up the table, get the data, and close it
                    x += "<div id='location-table'><table>";
                	x += locationData(sel, data);
                	x+= "</table></div>";
                   
                    //load the tabular data from x into correct div
                    $('#fragment-2').html(x);
					
					//listens to changes in the select menu to determine the new table info
					var type = document.getElementById("loc-type");
					type.addEventListener('change', function(){
						sel = $('select[name=loc-type]').val(); //get the value of the chosen select and change the sel variable to equal it
						
						//grab the location-table div and empty it
						var div = $('#location-table');
						
						div.empty();//empties the div
							
							//fill the information out for the table with corresponding values
							var y = "<table>";
							y += locationData(sel, data);
							y+= "</table>";
							
						//add to the location-table div
						div.html(y);
					}); 

					google.maps.event.trigger(map, 'resize'); map.setZoom( map.getZoom() );



                }//end else
             }//end success
        });//end ajax
	}
/** ************************************************************************************
 ** REPEATABLE FUNCTIONS ***************************************************************
 ***************************************************************************************/
	/**
	* a function designed to get the requested tagname data from the data 
	* and put it in an array
	* @return arry 
	*/
    function getArray(data, tagName){
        var arry = [];
        $(tagName, data).each(function(){
            
			var txt = $(this).text();
			
			if(txt === null || txt === "" || txt === "null"){
				txt = " ";
			}
			
			arry[arry.length] = txt;
        })

        return arry;
	}

	/**
	  * checks to see if a key is null
	  * @param keyVar
	  */
	function ifNull(keyVar){
		if(keyVar === null || keyVar == "" || keyVar== "null"){
			keyVar = " ";
		}

		return keyVar;
	}
	/**
	  * get and return requested location data
	  * @param sel
	  * @param data 
	  */
	function locationData(sel, data){
		//create arrays for needed data
		var address1 = getArray(data, 'address1');
        var address2 = getArray(data, 'address2');
        var city = getArray(data, 'city');
        var state = getArray(data, 'state');
        var phone = getArray(data, 'phone');
        var ttyphone = getArray(data, 'ttyphone');
        var fax = getArray(data, 'fax');
        var latitude = getArray(data, 'latitude');
        var longitude = getArray(data, 'longitude');
        var countyName = getArray(data, 'countyName');

		//create address string
		var addrStr = address1[sel] + " " + address2[sel];
    	allAddr = addrStr + " " +city[sel] + ", " +	state[sel];

    	var latLong = GetLattLong(allAddr);

    	//print out data for the table
      
        var x = getRow("Address", addrStr);
		x += getRow("City", city[sel]);
		x += getRow("State", state[sel]);
		x += getRow("Phone", phone[sel]);
		x += "<tr><td>TTY Phone</td><td>" + ttyphone[sel] +  "</td></tr>";
		x += getRow("Fax", fax[sel]);;
		x += getRow("Latitude", latitude[sel]);
		x += getRow("Longitude", longitude[sel]);
		x += getRow("County", countyName[sel]);
        x+= "</table></div>";

    	return x;

	}

	/**
	  * the prints requested data in a row and returns it
	  * @param label
	  * @param info
	  */
	function getRow(label, info){
		//load var and return to function
		var row = "<tr><td>" + label + "</td><td>" + info +  "</td></tr>";
		
		return row;
	}
	
	/**
	  * gets the information for training
	  * @param id
	  */
	function getTraining(id){
		//$('#fragment-4').html('going to get Training of '+id);
		
		 $.ajax({
			type:'get',
			url:'proxy.php',
			data:{path:'/'+id+'/Training'},
			dataType:'xml',
			success:function(data){
				if($(data).find('error').length!=0){
					$('#fragment-4').html("No data to show.");
				}else{
					//header	
					var x = "<h3>Services / Training </h3>";
					//gets count to see if there are results to be read
					var count = $(data).find('count').text();
					
					if(count !== '0'){
						var type = getArray(data, 'type');
						var abbrev = getArray(data, 'abbreviation');
						
						x+= "<div id='training-div'><table>";
						x+= "<tr><th>Type</th><th>Abbreviation</th></tr>";
						for(var i = 0; i < type.length; i++){
							x+= getRow(type[i], abbrev[i]);
						}
						
						x+= "</table></div>";
					}else{
						x+= "<p>No training available</p>";
					}	
						$("#fragment-4").html(x);
					
						}//end else
					}//end success
		}); //end ajax call
	}

	/**
	  * get the treatment info and return to the appropiate div
	  * @param id
	  */
	function getTreatment(id){
		//$('#fragment-4').html('going to get Treatment of '+id);
             $.ajax({
			type:'get',
			url:'proxy.php',
			data:{path:'/'+id+'/Treatments'},
			dataType:'xml',
			success:function(data){
				if($(data).find('error').length!=0){
					$('#fragment-3').html("No data to show.");
				}else{
//<treatment>
//<typeId>10</typeId>
//<type>Burn Center</type>
//<abbreviation>Tr-Burn</abbreviation>
//</treatment>   
	                var x = "<h3>Treatments</h3>";
	                var count = $(data).find('count').text();

	                if(count !== '0'){
	                    var type = getArray(data, 'type');
	                    var abbrev = getArray(data, 'abbreviation');

	                    x+= "<div id='treatment-div'><table>";
	                    x+= "<tr><th>Type</th><th>Abbreviation</th></tr>";
	                    //get the data to print out
	                    for(var i = 0; i < type.length; i++){
							x+= getRow(type[i], abbrev[i]);
						}

	                    x+= "</table></div>";
	                }else{
	                    x+= "<p>No treatments available</p>";
	                }	
	                $("#fragment-3").html(x);    
	            }   //end else
	        }//end success
	    });//end ajax call

	}

	/**
	  * get the information for facilities
	  * @param id
	  */
	function getFacilities(id){
		//$('#fragment-5').html('going to get Facilities of '+id);
             $.ajax({
                type:'get',
                url:'proxy.php',
                data:{path:'/'+id+'/Facilities'},
                dataType:'xml',
                success:function(data){
                        if($(data).find('error').length!=0){
                                $('#fragment-5').html("No data to show.");
                        }else{
                        var x = "<h3>Facilities</h3>";
                        var count = $(data).find('count').text();

                        if(count !== '0'){
                            var type = getArray(data, 'type');
                            var quantity = getArray(data, 'quantity');
                            var descrip = getArray(data, 'description');

                            x+= "<div id='facility-div'><table>";
                            x+= "<tr><th>Name</th><th>Quanity</th><th>Description</th></tr>";
                            for(var i = 0; i < type.length; i++){
                                    x+= "<tr><td>"+ type[i] +"</td><td>" + quantity[i]+ "</td><td>" + descrip[i] + "</td></tr>";
                            }

                            x+= "</table></div>";
                        }else{
                            x+= "<p>No facilities available</p>";
                        }	
                        $("#fragment-5").html(x);  
                        }//end else
                    }//end success
            });//end ajax
	}

	/**
	  * get the equipment information for the id
	  * @param id
	  */
	function getEquipment(id){
        $.ajax({
            type:'get',
            url:'proxy.php',
            data:{path:'/'+id+'/Equipment'},
            dataType:'xml',
            success:function(data){
                    if($(data).find('error').length!=0){
                            $('#fragment-6').html("No data to show.");
                    }else{
                        var x = "<h3>Equipment</h3>";
                        var count = $(data).find('count').text();

                        if(count !== '0'){
                            var type = getArray(data, 'type');
                            var quantity = getArray(data, 'quantity');
                            var descrip = getArray(data, 'description');

                            x+= "<div id='facility-div'><table>";
                            x+= "<tr><th>Name</th><th>Quanity</th><th>Description</th></tr>";
                            for(var i = 0; i < type.length; i++){
                                    x+= "<tr><td>"+ type[i] +"</td><td>" + quantity[i]+ "</td><td>" + descrip[i] + "</td></tr>";
                            }

                            x+= "</table></div>";
                        }else{
                            x+= "<p>No equipment available</p>";
                        }	
                        $("#fragment-6").html(x);  
                    }//end else
                }//end success
        });//end ajax
	}

	/**
	  * gets the physician info and prints to the right div
	  * @param id
	  */
	function getPhysicians(id){
         $.ajax({
            type:'get',
            url:'proxy.php',
            data:{path:'/'+id+'/Physicians'},
            dataType:'xml',
            success:function(data){
                    if($(data).find('error').length!=0){
                            $('#fragment-7').html("No data to show.");
                    }else{
	                    var x = "<h3>Physicians with Admitting Privileges</h3>";
	                    var count = $(data).find('count').text();

	                    if(count !== '0'){
	                        var fname = getArray(data, 'fName');
	                        var mname = getArray(data, 'mName');
	                        var lname = getArray(data, 'lName');
	                        var suffix = getArray(data, 'suffix');
	                        var phone = getArray(data, ' phone');
	                        var license = getArray(data, 'license');

	                        x+= "<div id='facility-div'><table>";
	                        x+= "<tr><th>Name</th><th>License</th><th>Contact</th></tr>";
	                        for(var i = 0; i < fname.length; i++){
	                                x+= "<tr><td>"+ fname[i];
	                                
	                                if(mname[i] !== " "){
	                                    x+= " " + mname[i];
	                                }
	                                
	                                x+= " " + lname[i];
	                                
	                                if(suffix[i] !== " "){
	                                    x+= " " + suffix[i];
	                                }
	                                x+= " </td><td>" + license[i]+ "</td><td>" + phone[i] + "</td></tr>";
	                        }

	                        x+= "</table></div>";
	                    }else{
	                        x+= "<p>No physicians available</p>";
	                    }	
	                    $("#fragment-7").html(x);  
	                }//end else
                }//end success
        });//end ajax
	}

	/**
	  * get people information and return it to the div
	  * @param id
	  */
	function getPeople(id){
		//$('#fragment-8').html('going to get People of '+id);
             $.ajax({
                type:'get',
                url:'proxy.php',
                data:{path:'/'+id+'/People'},
                dataType:'xml',
                success:function(data){
                        if($(data).find('error').length!=0){
                                $('#fragment-8').html("No data to show.");
                        }else{

                        var x = "<h3>People</h3>";
                      //draw out site details
                      //select values for each site
                      //based on site grab persons (below)
                        var siteCount = $(data).find('siteCount').text();

			            var ppl = [];
			            x+= "<select id='people-sel'>"
			            var y = "<br><table id='people-table' class='display' cellspacing='0' width='100%'><thead><tr><th>Name</th><th>Role</th></tr></thead>";
			            
			            $('site', data).each(function(){
			                x+='<option value="'+$(this).attr('siteId')+'">'+$(this).attr('address')+'</option>';
			               var count =$('personCount', data).text();
			               if(count > 0){
				                $(this).find('person').each(function(){
				                   var p = '<tr><td>'+$(this).find('fName').text()+' '+$(this).find('lName').text()+'</td><td>'+$(this).find('role').text()+'</td></tr>';
				                   ppl.push(p);
				                });
				            }
			            });
			            
			            x+="</select><br><div id='people-div'></div>";
			            //
			      		var z = y;
			      		for(var i = 0; i < ppl.length; i++){
			      			z+= ppl[i];
			      		}
			      		z+="</table>";
			      		

			            var div = $('#fragment-8');

			            div.html(x);

			            $('#people-div').html(z);

			            $('#people-sel').change(function(){
			            	$('#people-div').empty();
			            	var ppl2 = [];
			            	$('site', data).each(function(){
			                
				               var count =$('personCount', data).text();
				               if(count > 0){
					                $(this).find('person').each(function(){
					                   var p = '<tr><td>'+$(this).find('fName').text()+' '+$(this).find('lName').text()+'</td><td>'+$(this).find('role').text()+'</td></tr>';
					                   ppl2.push(p);
					                });
				            }

				            var a = y;
				            for(var j = 0; j < ppl2.length; j++){
				      			a+= ppl[i];
				      		}
				      		a+="</table>";

				            $('#people-div').html(a);
			            	});
			            });
			     
			           	}//end else
                    }//end success
            });//end ajax
	}

	/**
	  * This function is called when user 
	  * changes the state select (and onload
	  * @param which
	  */
    function getCities(which){
    		if(which == ''){
    			$('#orgCitySearch').html('City/Town<input id="cityTown" type="text"/>');
    		}else{
    		$.ajax({
  				type: "GET",
  				async: true,
  				cache:false,
  				url: "proxy.php",
  				data: {path: "/Cities?state="+which},  
  				dataType: "xml",
  				success: function(data, status){ 
       	 			var x='';
       	 			if($(data).find('error').length != 0){
	       	 			//do nothing?
       	 			}else if($(data).find('row').length==0 && which != ''){
       	 				$('#orgCitySearch').html('City/Town<input id="cityTown" type="text" value="No cities/Towns in "'+which+'"/>');
       	 			}else{
       	 				x+='<select id="cityTown" name="town"><option value="">--cities--<\/option>';
       	 				$('row',data).each(
       	 					function(){
       	 						x+='<option value="'+$(this).find('city').text()+'">'+$(this).find('city').text()+'<\/option>';
       	 					}
       	 				);
       	 				x+="<\/select>";
       	 				$('#orgCitySearch').html(x);
       	 			}
		   		}
			});
			}
    	}
	
   /** 
     * Because the orgTypes could change we load them 'fresh' every time.
	 * In reality you should load these in PHP on the server end (saves a 
	 * round trip) but since this is client...
	 */
	function getOrgTypes(){
    		$.ajax({
  				type: "GET",
  				async: true,
  				cache:false,
  				url: "proxy.php",
  				data: {path: "/OrgTypes"},  
  				dataType: "xml",
  				success: function(data, status){ 
       	 			var x='';
       	 			if($(data).find('error').length != 0){
	       	 			//do nothing?
       	 			}else{
       	 				x+='<option value="">All Organization Types<\/option>';
       	 				$('row',data).each(
       	 					function(){
       	 						x+='<option value="'+$(this).find('type').text()+'">'+$(this).find('type').text()+'<\/option>';
       	 					}
       	 				);
       	 				//return x;
       	 				$("#orgType").html(x);
       	 			}
		   		}
			});
    	}
	
	/**
	  * Do a search. 
	  * so when an org is clicked it will create the select and getGeneral()
	  */
	function checkSearch(){
			$.ajax({
  				type: "GET",
  				async: true,
  				cache:false,
  				url: "proxy.php",
  				data: {path: "/Organizations?"+$('#Form1').serialize()},
  				dataType: "xml",
  				success: function(data, status){ 
  					var x='';
       	 			$('#tabelOutput').html('');
                                //$('#pagination').html('');
       	 			if($(data).find('error').length != 0){
	       	 			$('error', data).each(
    	   	 				function(){
       		 				x+="error getting data"; 
       	 					}
       	 				);
       	 			}else if($(data).find('row').length==0){
       	 				x+="No data matches for: "+$('#orgType').val() + (($('#orgName').val()!='')?" > name: "+$('#orgName').val():"") + (($('#state').val()!='')?" > State: "+$('state').val():"");
       	 				if($('#cityTown').val()=='' || $('#cityTown').val().search(/No cities/)==0){
       	 					x+="";
       	 				}else{
       	 					x+=" > City: "+$('#cityTown').val();
       	 				}
       	 			/**********/
       	 			//This is for a Physician - it will be different data coming back
       	 			}else if($("#orgType").val() == "Physician"){
       	 				$("#resultsTitle").html(' ('+$(data).find('row').length+' total found)');
       	 				// build a table of Physician information
					/**********/
       	 			}else{
       	 				//$("#resultsTitle").html(' ('+$(data).find('row').length+' total found)');
                                        $("#resultsTitle").html(' ('+$(data).find('row').length+' total found)');
       	 				x+="<div><table id=\"myTable\" class=\"tablesorter\" border=\"0\" cellpadding=\"0\" cellspacing=\"1\"><thead><tr><th class=\"header\" style=\"width:90px;\">Type<\/th><th class=\"header\">Name<\/th><th class=\"header\">City<\/th><th class=\"header\">Zip<\/th><th class=\"header\" style=\"width:70px;\">County<\/th><th class=\"header\" style=\"width:40px;\">State<\/th><\/tr><\/thead>";
       	 				x+="<tfoot><tr><th class=\"header\" style=\"width:90px;\">Type<\/th><th class=\"header\">Name<\/th><th class=\"header\">City<\/th><th class=\"header\">Zip<\/th><th class=\"header\" style=\"width:70px;\">County<\/th><th class=\"header\" style=\"width:40px;\">State<\/th><\/tr><\/tfoot>";

       	 				$('row',data).each(
       	 					function(){
       	 						x+='<tr>';
       							x+="<td>"+$(this).find('type').text()+"<\/td>";
        						x+="<td style=\"cursor:pointer;color:#987;\" onclick=\"getData("+$(this).find('OrganizationID').text()+");\">"+$(this).find('Name').text()+"<\/td>";
       	 						x+="<td>"+$(this).find('city').text()+"<\/td>";
       	 						x+="<td>"+$(this).find('zip').text()+"<\/td>";
       	 						x+="<td>"+$(this).find('CountyName').text()+"<\/td>";
       	 						x+="<td>"+$(this).find('State').text()+"<\/td><\/tr>";
       	 					}
       	 				);
       	 				x+="<\/table>";
       	 			}
		     		$('#tabelOutput').html(x);
                    
                    //puts all the results in the table into a uniform table
                    $('#myTable').dataTable( {
			        	"lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]
			    	});
		   		}
			});
		}
	
	/**
	  * Occasionally we will get back 'null' as a value
	  * you should NEVER show 'null' in the client - make it blank...
	  * @param what
	  * @param data
	  * @param i
	  */
	function myFind(what,data,i){
		if(i!=-1){
			return (($(data).find(what).eq(i).text()!='null')?$(data).find(what).eq(i).text()+' ':'')
		}else{
			return (($(data).find(what).text()!='null')?$(data).find(what).text()+' ':'')
		}
	}

    </script>
  </head>

  <body>
  <h2>Emergency Services Directory</h2>

  <div id="dump"></div>
  <hr/>
  

    <div id="tabs" style="display:none;">
        <ul>
          <li><a href="#fragment-1"><span>General</span></a></li>
          <li><a href="#fragment-2"><span>Locations</span></a></li>
          <li><a href="#fragment-3"><span>Treatments</span></a></li>
          <li><a href="#fragment-4"><span>Training</span></a></li>
          <li><a href="#fragment-5"><span>Facilities</span></a></li>
          <li><a href="#fragment-6"><span>Equipment</span></a></li>
          <li><a href="#fragment-7"><span>Physicians</span></a></li>
          <li><a href="#fragment-8"><span>People</span></a></li>
        </ul>
        <div id="fragment-1">
          <table id="output"></table>
        </div>
        <div id="fragment-2">
        	<div id="map-canvas"></div>
        </div>

        <div id="fragment-3"></div>
        <div id="fragment-4"></div>
        <div id="fragment-5"></div>
        <div id="fragment-6"></div>
        <div id="fragment-7"></div>
        <div id="fragment-8"></div>
      </div>

  <script>
  $( "#tabs" ).tabs();
  </script>

  
  
  
  <div id="slidingDiv" style="display: block;"><!--show open as block to start with-->

    <form  method="post" action="" id="Form1" class="pure-form">
    <fieldset><legend>Search Criteria</legend>
    <p>

    Organization Type
    <select id="orgType" name="type" onchange="(this.value=='Physician')?$('#orgLabel').html('Physician\'s Name'):$('#orgLabel').html('Organization Name')">

    </select>
    </p>

    <p>
    <span id="orgLabel">Organization Name</span>
    <input id="orgName" name="name" type="text"><em style="color: rgb(104, 129, 162);"> *can be partial - "vol" for "Volunteer"</em></p>
    State
    <select id="state" name="state" onchange="getCities(this.value)">
                    <!--  REQUIRED BY ASSIGNMENT-->
                    <option value="">All States</option>
                    <option value="AK">AK</option>

                    <option value="AL">AL</option>
                    <option value="AR">AR</option>
                    <option value="AZ">AZ</option>
                    <option value="CA">CA</option>
                    <option value="CO">CO</option>
                    <option value="CT">CT</option>

                    <option value="DC">DC</option>
                    <option value="DE">DE</option>
                    <option value="FL">FL</option>
                    <option value="GA">GA</option>
                    <option value="HI">HI</option>
                    <option value="IA">IA</option>

                    <option value="ID">ID</option>
                    <option value="IL">IL</option>
                    <option value="IN">IN</option>
                    <option value="KS">KS</option>
                    <option value="KY">KY</option>
                    <option value="LA">LA</option>

                    <option value="MA">MA</option>
                    <option value="MD">MD</option>
                    <option value="ME">ME</option>
                    <option value="MI">MI</option>
                    <option value="MN">MN</option>
                    <option value="MO">MO</option>

                    <option value="MS">MS</option>
                    <option value="MT">MT</option>
                    <option value="NC">NC</option>
                    <option value="ND">ND</option>
                    <option value="NE">NE</option>
                    <option value="NH">NH</option>

                    <option value="NJ">NJ</option>
                    <option value="NM">NM</option>
                    <option value="NV">NV</option>
                    <option value="NY" selected="selected">NY</option>
                    <option value="OH">OH</option>
                    <option value="OK">OK</option>

                    <option value="OR">OR</option>
                    <option value="PA">PA</option>
                    <option value="RI">RI</option>
                    <option value="SC">SC</option>
                    <option value="SD">SD</option>
                    <option value="TN">TN</option>

                    <option value="TX">TX</option>
                    <option value="UT">UT</option>
                    <option value="VA">VA</option>
                    <option value="VT">VT</option>
                    <option value="WA">WA</option>
                    <option value="WI">WI</option>

                    <option value="WV">WV</option>
                    <option value="WY">WY</option>

            </select>
    <span id="orgCitySearch">
    </span>
    <p>
    County
    <input id="county" type="text"/>
    </p><p>
    ZIP Code
    <input id="zip" type="text" name="zip"/></p>
    <div style="margin:0 0 0 210px"><input value="Show Results" onclick="checkSearch()" id="btnSearch" class="button pure-button" type="button"/>&nbsp;<input type="reset" class="button pure-button" value="Reset Form" onclick="resetAll()"/>
    </div>
    </fieldset>
    </form>
</div><!--end the show hide div -->

<a href="#" class="show_hide button pure-button" rel="#slidingDiv">Close Search</a><!--user clicks to open / close -->
 <br>     
 <br>      
	<div id="tabelOutput"></div>
      
  </body>
<!--</html>-->